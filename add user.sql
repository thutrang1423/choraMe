DROP TABLE IF EXISTS product_colors;
DROP TABLE IF EXISTS product_sizes; 
DROP TABLE IF EXISTS product_variants;
DROP TABLE IF EXISTS product_reviews;
DROP TABLE IF EXISTS product_detail;
DROP TABLE IF EXISTS products;
DROP TABLE IF EXISTS category; 
DROP TABLE IF EXISTS sizes; 
DROP TABLE IF EXISTS colors;

-- Tạo bảng danh mục sản phẩm
CREATE TABLE category (
  id VARCHAR(20) PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  slug VARCHAR(100) UNIQUE NOT NULL
);
-- Thêm dữ liệu vào bảng category
INSERT INTO category (id, name, slug) VALUES 
  ('category1', 'Áo thun', 'ao-thun'),
  ('category2', 'Áo sơ mi', 'ao-so-mi'),
  ('category3', 'Quần dài', 'quan-dai'),
  ('category4', 'Quần short', 'quan-short'),
  ('category5', 'Quần đùi', 'quan-dui'),
  ('category6', 'Đầm', 'dam'),
  ('category7', 'Áo khoác', 'ao-khoac'),
  ('category8', 'Bộ phối sẵn', 'sets'),
  ('category9', 'Váy', 'vay');

-- Tạo bảng sản phẩm
-- Bảng chính vẫn giữ nguyên, không cần cột size
CREATE TABLE products (
  id VARCHAR(20) PRIMARY KEY,
  title VARCHAR(100) NOT NULL,
  price INT NOT NULL,
  saleOff INT DEFAULT 0,
  salePrice INT GENERATED ALWAYS AS (price - price * saleOff / 100) STORED,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  category_id VARCHAR(20),
  FOREIGN KEY (category_id) REFERENCES category(id)
);
INSERT INTO products (id, title, price,  saleOff, created_at, category_id )
VALUES('1product', 'áo vest nữ category1', 750000, 20, '2025-01-22 10:30:00' ,'category1'),
		('2product', 'áo sơ mi nữ category2',500000 , 10,'2025-01-22 10:30:00' , 'category2'),
        ('3product', 'váy body category3', 2000000, 0,'2025-01-22 10:30:00' , 'category3'),
        ('4product', 'áo vest nữ category4', 750000, 3,'2025-01-22 10:30:00' , 'category4'),
		('5product', 'áo sơ mi nữ category5',500000 , 5,'2025-02-22 10:30:00' , 'category5'),
        ('6product', 'váy body category6', 2000000, 8,'2025-02-22 10:30:00' , 'category6'),
        ('7product', 'áo vest nữ category7', 750000, 10,'2025-02-22 10:30:00' , 'category7'),
		('8product', 'áo sơ mi nữ category1',500000 ,0,'2025-03-22 10:30:00' , 'category1'),
        ('9product', 'váy body category8', 2000000, 10, '2025-03-22 10:30:00' ,'category8'),
        ('10product', 'áo vest nữ category9', 750000,15,'2025-03-22 10:30:00' , 'category9'),
		('11product', 'áo sơ mi nữ category1',500000 , 5, '2025-03-22 10:30:00' ,'category1'),
        ('12product', 'váy body category2', 2000000, 3,'2025-04-22 10:30:00' , 'category2'),
        ('13product', 'váy body category3', 2000000, 0, '2025-04-22 10:30:00' ,'category3'),
        ('14product', 'áo vest nữ category4', 750000,10,'2025-04-22 10:30:00' , 'category4'),
		('15product', 'áo sơ mi nữ category5',500000 , 0,'2025-04-22 10:30:00' , 'category5'),
        ('16product', 'váy bodycategory6', 2000000, 0,'2025-05-22 10:30:00' , 'category6'),
        ('17product', 'áo vest nữ category7', 750000, 15,'2025-05-22 10:30:00' , 'category7'),
		('18product', 'áo sơ mi nữ category1',500000 , 20,'2025-05-22 10:30:00' , 'category1'),
        ('19product', 'váy body category8', 2000000, 10,'2025-05-22 10:30:00' , 'category8'),
        ('20product', 'áo vest nữ category9', 750000, 20,'2025-05-22 10:30:00' , 'category9'),
        ('21product', 'áo sơ mi nữ category1',500000 , 5,'2025-06-22 10:30:00' , 'category1'),
        ('22product', 'váy body category2', 2000000, 0,'2025-06-22 10:30:00' , 'category2'),
        ('23product', 'váy body category3', 2000000, 10,'2025-06-22 10:30:00' , 'category3'),
        ('24product', 'áo vest nữ category4', 750000, 5,'2025-06-22 10:30:00' , 'category4'),
		('25product', 'áo sơ mi nữ category5',500000 , 10,'2025-06-22 10:30:00' , 'category5'),
        ('26product', 'váy body category6', 2000000, 10,'2025-07-22 10:30:00' , 'category6'),
        ('27product', 'áo vest nữ category7', 750000, 5,'2025-07-22 10:30:00' , 'category7'),
		('28product', 'áo sơ mi nữcategory1',500000 , 10,'2025-07-22 10:30:00' , 'category1'),
        ('29product', 'váy body category8', 2000000,20, '2025-07-22 10:30:00' ,'category8'),
        ('30product', 'áo vest nữ category9', 750000, 10,'2024-010-22 10:30:00' , 'category9'),
        ('31product', 'áo sơ mi nữ category1',500000 , 8,'2024-11-22 10:30:00' , 'category1'),
        ('32product', 'váy body category2', 2000000, 3,'2024-012-22 10:30:00' , 'category2'),
        ('33product', 'váy body category3', 2000000, 5,'2024-8-22 10:30:00' , 'category3'),
        ('34product', 'áo vest nữ category4', 750000, 20,'2024-10-22 10:30:00' , 'category4'),
		('35product', 'áo sơ mi nữcategory5',500000 ,10,'2024-11-22 10:30:00' , 'category5'),
        ('36product', 'váy body category6', 2000000, 15,'2024-12-22 10:30:00' , 'category6'),
        ('37product', 'áo vest nữ category7', 750000, 10,'2024-8-22 10:30:00' , 'category7'),
		('38product', 'áo sơ mi nữ category1',500000 , 5,'2024-10-22 10:30:00' , 'category1'),
        ('39product', 'váy body category8', 2000000, 9,'2024-11-22 10:30:00' , 'category8'),
        ('40product', 'áo vest nữ category9', 750000, 10,'2024-12-22 10:30:00' , 'category9');

-- Bảng phụ để lưu các size tương ứng của từng sản phẩm
CREATE TABLE sizes (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(10) UNIQUE NOT NULL
);
INSERT INTO sizes (name)
VALUES ('XXS'),('XS'), ('S'), ('M'), ('L'), ('XL'), ('XXL'), ('XXXL'),('XXXXL');
CREATE TABLE product_sizes (
  id INT AUTO_INCREMENT PRIMARY KEY,
  product_id VARCHAR(20),
  size_id INT,
  FOREIGN KEY (product_id) REFERENCES products(id),
  FOREIGN KEY (size_id) REFERENCES sizes(id)
);
INSERT INTO product_sizes (product_id, size_id)
VALUES 
  ('1product', 2),  
  ('1product', 3),  
  ('1product', 4),
  ('1product', 5),
  ('2product', 5),
  ('2product', 6),  
  ('2product', 7),  
  ('2product', 8),
  ('2product', 3),
  ('3product', 4),  
  ('3product', 5),  
  ('3product', 6),
  ('4product', 8),
  ('4product', 9),  
  ('4product', 5),  
  ('4product', 4),
  ('5product', 5),
  ('5product', 2),  
  ('5product', 3),  
  ('5product', 4),
  ('6product', 2),  
  ('6product', 3),  
  ('6product', 4),
  ('7product', 5),
  ('7product', 2),  
  ('7product', 3),  
  ('7product', 4),
  ('8product', 5),
  ('8product', 2),  
  ('8product', 3),
  ('9product', 4),
  ('9product', 5),
  ('9product', 5),
  ('9product', 2), 
  ('10product', 3),
  ('10product', 5),
  ('10product', 2),  
  ('10product', 3),
  ('11product', 5),
  ('11product', 2),  
  ('11product', 3),
  ('12product', 4),
  ('12product', 2), 
  ('12product', 3),
  ('12product', 5),
  ('13product', 2), 
  ('13product', 3),
  ('14product', 5),
  ('14product', 2),  
  ('14product', 3),
  ('15product', 5),
  ('15product', 2),  
  ('16product', 3),
  ('16product', 5),
  ('16product', 2), 
  ('17product', 3),
  ('17product', 5),
  ('18product', 6),  
  ('18product', 3),
  ('18product', 2),  
  ('18product', 4),
  ('18product', 5),
  ('19product', 3),
  ('19product', 2),  
  ('19product', 5),
  ('19product', 6),
  ('20product', 3),
  ('20product', 2),  
  ('20product', 4),
  ('20product', 8),  
  ('20product', 9),
  ('21product', 2),
  ('21product', 3),
  ('21product', 4),  
  ('22product', 4),
  ('22product', 2),  
  ('22product', 3),
  ('22product', 5),  
  ('23product', 3),
  ('23product', 2),  
  ('23product', 5),
  ('23product', 4),  
  ('24product', 3),
  ('24product', 2),  
  ('24product', 4),
  ('25product', 2),  
  ('25product', 3),
  ('25product', 4),  
  ('26product', 3),
  ('26product', 2),  
  ('27product', 3),
  ('27product', 2),  
  ('27product', 4),
  ('27product', 3),
  ('27product', 5),  
  ('28product', 4),
  ('28product', 3),
  ('28product', 2),  
  ('28product', 5),
  ('29product', 3),
  ('29product', 4),  
  ('29product', 5),
  ('29product', 6),
  ('30product', 3),  
  ('30product', 4),
  ('30product', 5),
  ('31product', 6),  
  ('31product', 7),
  ('31product', 8),
  ('31product', 9),  
  ('32product', 2),
  ('32product', 3),
  ('32product', 4),  
  ('33product', 3),
  ('33product', 4),
  ('33product', 5),  
  ('33product', 6),
  ('34product', 4),
  ('34product', 5),  
  ('34product', 6),
  ('35product', 3),
  ('35product', 4),  
  ('35product', 5),
  ('35product', 6),
  ('36product', 7),  
  ('36product', 8),
  ('36product', 9),
  ('37product', 3),  
  ('37product', 4),
  ('37product', 5),
  ('37product', 6),  
  ('38product', 2),
  ('38product', 3),
  ('38product', 4),  
  ('38product', 5),
  ('39product', 3),
  ('39product', 4),  
  ('39product', 5),
  ('40product', 4),
  ('40product', 2),  
  ('40product', 3);
  


CREATE TABLE colors (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(50) NOT NULL,          
  slug VARCHAR(50) UNIQUE NOT NULL,   
  hex_code VARCHAR(7) NOT NULL        
);
INSERT INTO colors (name, slug, hex_code)
VALUES
  ('Đỏ mơ', 'do-mo', '#F94144'),
  ('Trắng', 'trang', '#FFFFFF'),
  ('Be', 'be', '#F5F5DC'),
  ('Xám', 'xam', '#A9A9A9'),
  ('Hồng', 'hong', '#FFC0CB'),
  ('Đỏ', 'do', '#FF0000'),
  ('Xanh', 'xanh', '#1E90FF'),
  ('Vàng', 'vang', '#FFD700'),
  ('Nâu', 'nau', '#8B4513'),
  ('Tím', 'tim', '#800080');
CREATE TABLE product_colors (
  id INT AUTO_INCREMENT PRIMARY KEY,
  product_id VARCHAR(20),
  color_id INT,
  FOREIGN KEY (product_id) REFERENCES products(id),
  FOREIGN KEY (color_id) REFERENCES colors(id)
);
INSERT INTO product_colors (product_id, color_id)
VALUES 
  ('1product', 1),  
  ('1product', 2),  
  ('1product', 3),
  ('1product', 4),  
  ('2product', 5),  
  ('2product', 6),
  ('2product', 7),  
  ('3product', 8),  
  ('3product', 9),
  ('3product', 10),  
  ('3product', 1),  
  ('3product', 2),
  ('4product', 3),  
  ('4product', 4),  
  ('4product', 5),
  ('4product', 6),  
  ('4product', 7),  
  ('4product', 8),
  ('5product', 9),  
  ('5product', 10),  
  ('5product', 1),
  ('5product', 2),  
  ('6product', 3),  
  ('6product', 4),
  ('6product', 5),  
  ('6product', 6),  
  ('6product', 7),
  ('7product', 8),  
  ('7product', 9),  
  ('7product', 10),
  ('7product', 1),  
  ('8product', 2),  
  ('8product', 3),
  ('8product', 4),  
  ('9product', 5),  
  ('9product', 6),
  ('9product', 7),  
  ('9product', 8),  
  ('10product', 9),
  ('10product', 10),  
  ('10product', 1),  
  ('10product', 2),
  ('11product', 3),  
  ('11product', 4),  
  ('11product', 5),
  ('11product', 6),  
  ('11product', 7),  
  ('12product', 8),
  ('12product', 9),  
  ('12product', 10),  
  ('13product', 1),
  ('13product', 2),  
  ('13product', 3),  
  ('13product', 4),
  ('14product', 5),  
  ('14product', 6),  
  ('14product', 7),
  ('14product', 8),  
  ('15product', 9),  
  ('15product', 10),
  ('15product', 1),  
  ('15product', 2),  
  ('16product', 3),
  ('16product', 4),  
  ('16product', 5),  
  ('17product', 6),
  ('17product', 7),  
  ('17product', 8),  
  ('17product', 9),
  ('17product', 10),  
  ('18product', 1),  
  ('18product', 2),
  ('18product', 3),  
  ('18product', 4),  
  ('19product', 5),
  ('19product', 6),  
  ('19product', 7),  
  ('19product', 8),
  ('19product', 9),  
  ('20product', 10),  
  ('20product', 1),
  ('20product', 2),  
  ('21product', 3),  
  ('21product', 4),
  ('21product', 5),  
  ('21product', 6),  
  ('22product', 7),
  ('22product', 8),  
  ('22product', 9),  
  ('22product', 10),
  ('23product', 1),  
  ('23product', 2),  
  ('23product', 3),
  ('23product', 4),  
  ('24product', 5),  
  ('24product', 6),
  ('24product', 7),  
  ('25product', 8),  
  ('25product', 9),
  ('25product', 10),  
  ('25product', 1),  
  ('26product', 2),
  ('26product', 3),  
  ('26product', 4),  
  ('26product', 5),
  ('26product', 6),  
  ('27product', 7),  
  ('27product', 8),
  ('27product', 9),  
  ('28product', 10),  
  ('28product', 1),
  ('29product', 2),  
  ('29product', 3),  
  ('30product', 4),
  ('30product', 5),  
  ('30product', 6),  
  ('31product', 7),
  ('31product', 8),
  ('31product', 9),  
  ('31product', 10),
  ('32product', 1),
  ('32product', 2),  
  ('32product', 3),
  ('32product', 4),
  ('32product', 5),  
  ('33product', 6),
  ('33product', 7),
  ('33product', 8),  
  ('33product', 9),
  ('34product', 10),
  ('34product', 1),  
  ('35product', 2),
  ('35product', 3),
  ('35product', 4),  
  ('35product', 5),
  ('36product', 6),
  ('36product', 7),  
  ('37product', 8),
  ('37product', 9),
  ('37product', 10),  
  ('38product', 1),
  ('38product', 2),
  ('38product', 3),  
  ('39product', 4),
  ('39product', 5),
  ('39product', 6),  
  ('40product', 2),
  ('40product', 7);  

CREATE TABLE product_detail (
  id VARCHAR(20) PRIMARY KEY,
  des TEXT,
  brand VARCHAR(50),
  material VARCHAR(50),
  origin VARCHAR(50),
  gender ENUM('nam', 'nữ', 'unisex'),
  season ENUM('xuân', 'hạ', 'thu', 'đông'),
  -- is_new BOOLEAN DEFAULT FALSE, 
  is_featured BOOLEAN DEFAULT FALSE,
  FOREIGN KEY (id) REFERENCES products(id)
);
INSERT INTO product_detail (id, des, brand, material, origin, gender, season, is_featured)
VALUES
('1product', 'Áo vest nữ cao cấp, sang trọng, dễ phối đồ.', 'Chorame', 'Cotton', 'Việt Nam', 'nữ', 'thu', TRUE),
('2product', 'Áo sơ mi nữ basic, thoáng mát, form rộng.', 'Chorame', 'Linen', 'Hàn Quốc', 'nữ', 'hạ', FALSE),
('3product', 'Váy body ôm sát, tôn dáng, quyến rũ.', 'Chorame', 'Polyester', 'Việt Nam', 'nữ', 'hạ', TRUE),
('4product', 'Áo vest nữ thời trang công sở.', 'Chorame', 'Len', 'Trung Quốc', 'nữ', 'đông', FALSE),
('5product', 'Áo sơ mi nữ cổ trụ thanh lịch.', 'Chorame', 'Cotton', 'Việt Nam', 'nữ', 'xuân', FALSE);



CREATE TABLE product_reviews (
  id INT AUTO_INCREMENT PRIMARY KEY,
  product_id VARCHAR(20),
  -- user_id VARCHAR(20),
  rating INT CHECK (rating BETWEEN 1 AND 5),
  comment TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (product_id) REFERENCES products(id)
  -- , FOREIGN KEY (user_id) REFERENCES users(id) -- nếu có bảng users
);
INSERT INTO product_reviews (product_id, rating, comment)
VALUES
('1product', 5, 'Áo rất đẹp, chất vải mát.'),
('1product', 4, 'Hài lòng nhưng giao hơi chậm.'),
('2product', 3, 'Áo ổn nhưng form hơi rộng.'),
('2product', 5, 'Rất vừa ý, mặc đi làm rất hợp.');

CREATE TABLE product_variants (
  id INT AUTO_INCREMENT PRIMARY KEY,
  product_id VARCHAR(20),
  color_id INT,
  size_id INT,
  stock INT DEFAULT 0,
  sku VARCHAR(50),
  FOREIGN KEY (product_id) REFERENCES products(id),
  FOREIGN KEY (color_id) REFERENCES colors(id),
  FOREIGN KEY (size_id) REFERENCES sizes(id)
);
INSERT INTO product_variants (product_id, color_id, size_id, stock, sku)
VALUES
('1product', 1, 3, 10, '1P-DO-S'),
('1product', 1, 4, 5, '1P-DO-M'),
('1product', 2, 3, 8, '1P-TRANG-S'),
('2product', 3, 5, 7, '2P-BE-L'),
('2product', 4, 4, 3, '2P-XAM-M');



DROP TABLE IF EXISTS users;
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  username VARCHAR(50) NOT NULL UNIQUE,
  email VARCHAR(100) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL,
  full_name VARCHAR(50),
  -- avatar VARCHAR(255),
  role ENUM('user', 'admin') DEFAULT 'user',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
               ON UPDATE CURRENT_TIMESTAMP
);

INSERT INTO users (username, email, password, full_name, role)
VALUES 
-- 10 khách hàng (user)
('user01', 'user01@example.com', '$2a$10$abc123456789', 'Nguyễn Văn A', 'user'),

-- 3 nhân viên (admin)
('staff01', 'staff01@shop.com', '$2a$10$abc123456789', 'Lê Nhân Viên 1', 'admin'),

-- 1 chủ cửa hàng (admin)
('admin01', 'admin@shop.com', '$2a$10$abc123456789', 'Chủ Cửa Hàng', 'admin');
